cmake_minimum_required(VERSION 3.24)

add_library(config SHARED config.cpp)

target_link_directories(config PRIVATE
  ${CMAKE_BINARY_DIR}/third_party/install/lib
)

add_dependencies(config boost)

target_link_libraries(config libboost_thread)
target_compile_definitions(config PRIVATE BOOST_ALL_NO_LIB WIN32_LEAN_AND_MEAN)
target_compile_options(config PRIVATE "/Zi")

target_include_directories(config PRIVATE
  ${PRJ_SRC_DIR}/third_party
)

set_target_properties(config
  PROPERTIES
  LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/."
  ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/third_party/intall/lib"
)

install(TARGETS config LIBRARY DESTINATION .)
